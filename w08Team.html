<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Star Wars Display</title>
    <style></style>
    <link rel='stylesheet' type='text/css' href=''>
</head>

<body>

    
    <h1>Star Wars People</h1>
    <div>
    <ol id="listOfPeople">
    </ol>


    </div>

    <div>
    <button id="prev">Prevoius</button>
    <button id="next">Next</button>
    </div>


<script>
        function getPeople(url){
        return fetch(url).then((response) => {
            console.log(response);
            return response.json();
        }).catch((err) => {
            console.log(err);
        });
    }

    function buildList(data) {
        console.log(data);
        const listOfPeople = document.getElementById('listOfPeople');
        const people = data.results;
        for (i in people) {
            listOfPeople.innerHTML += `<li><h3>${people[i].name}</h3></li>`;
        };
    }

    function removeCurrentList() {
        const listOfPeople = document.getElementById('listOfPeople');
        const i = 0;
        while (listOfPeople.children.length > i) {
            listOfPeople.removeChild(listOfPeople.firstChild);
        }
    }

    
    function nextPage(){
        // remove current list
         removeCurrentList();
        // get new list
        getPeople(next).then((data) => {
            buildList(data);
            next = data.next;
            prev = data.previous;
        });
    }

    function prevPage(){
        // remove current list
        removeCurrentList();
        // get new list
        getPeople(prev).then((data) => {
            buildList(data);
            next = data.next;
            prev = data.previous;
        });
    }

    let next;
    let prev;
    
    getPeople("https://swapi.co/api/people/").then((data) => {
        buildList(data);
        next = data.next;
        prev = data.previous;
        document.getElementById('prev').addEventListener("click", prevPage);
        document.getElementById('next').addEventListener("click", nextPage);    
    });
    
</script>
</body>
</html>